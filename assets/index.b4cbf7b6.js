import{w,d as q,n as F,i as O,S as H,a as j,s as N,e as c,b as _,c as i,f as C,g as u,l as b,h as L,j as D,r as Se,o as re,k as ke,m as Le,p as le,q as ee,t as Ue,u as G,v as Y,x as z,y as W,z as J,A as Be,B as Ie}from"./vendor.d79b179a.js";const Ke=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};Ke();function Ee(){const e=localStorage.getItem("game")??"space-invaders",t=w(e);return{subscribe:t.subscribe,update:t.update,set(n){t.set(n),localStorage.setItem("game",n),location.reload()}}}const Q=Ee(),ie=w(!1),ue=w(!1),Fe=w(!1),Re=w(!1),Oe=w(!1),ce=w(!1),de=w(!1),fe=w(!1),me=w(!1),pe=w(!1),ve=w(!1),ge=w(!1),he=w(!1),He=w(3),je=w(1500),Ne=w(!0),Te=q([Fe,Re,Oe],([e,t,n])=>F(0|1<<1|1<<2|1<<3|+e<<4|+t<<5|+n<<6),0),Ge=q([ie,pe,ce,de,fe,me],([e,t,n,o,s,a])=>F(+e|+t<<1|+n<<2|1<<3|+o<<4|+s<<5|+a<<6),0),Ye=q([He,ue,je,ve,ge,he,Ne],([e,t,n,o,s,a,l])=>F(e-3|+t<<2|+(n==1e3)<<3|+o<<4|+s<<5|+a<<6|+!l<<7),0),S=(e,t)=>(e&1<<t)!=0,T=w(0),R=w(0),we=q(T,e=>S(e,0),!1),be=q(T,e=>S(e,1),!1),ye=q(T,e=>S(e,2),!1),_e=q(T,e=>S(e,3),!1),xe=q(R,e=>S(e,0),!1),qe=q(R,e=>S(e,1),!1),Me=q(R,e=>S(e,2),!1),Pe=q(R,e=>S(e,3),!1),Ae=q(R,e=>S(e,4),!1);function ze(){const e=w(0);return{subscribe:e.subscribe,update:e.update,set(t){e.set(F(t&7))}}}const $e=ze();function We(){const e=w(0);return{subscribe:e.subscribe,update:e.update,set(t){e.update(n=>O(O(t<<8)|F(n>>8)))}}}const Ce=We(),Je=q([$e,Ce],([e,t])=>F(t>>O(8-e)),0);function $(e,t){let n=!1,o=!1;return document.addEventListener("keydown",s=>{n||s.key==t&&(o=!0,e.set(!0))}),document.addEventListener("keyup",s=>{n||s.key==t&&(o=!1,e.set(!1))}),{handleMouseDown:s=>{o||s.button==0&&(n=!0,e.set(!0))},handleMouseUp:s=>{o||s.button==0&&(n=!1,e.set(!1))}}}function y(e,t){let n=new Audio(t);n.volume=.1;let o=!1;e.subscribe(s=>{s!=o&&(s==!0&&o==!1&&n.play(),o=s)})}function Qe(e){let t,n,o,s,a,l,p,d,h,g,m,r,v,P,f,x,A,U,M,te,k,B,se,E,I,ne,K,ae,V,X,oe;return{c(){t=c("div"),n=c("div"),o=c("div"),s=c("button"),s.textContent="Insert Coin",a=_(),l=c("button"),l.textContent="Start 1 Player",p=_(),d=c("button"),d.textContent="Start 2 Players",h=_(),g=c("div"),m=c("div"),r=c("button"),r.textContent="Fire",v=_(),P=c("div"),f=c("button"),f.textContent="Left",x=_(),A=c("button"),A.textContent="Right",U=_(),M=c("h5"),M.textContent="P1",te=_(),k=c("div"),B=c("button"),B.textContent="Fire",se=_(),E=c("div"),I=c("button"),I.textContent="Left",ne=_(),K=c("button"),K.textContent="Right",ae=_(),V=c("h5"),V.textContent="P2",i(s,"title","Keyboard: C"),i(s,"class","nes-btn is-warning is-small svelte-14d2sqa"),i(l,"title","Keyboard: 1"),i(l,"class","nes-btn is-small svelte-14d2sqa"),i(d,"title","Keyboard: 2"),i(d,"class","nes-btn is-small svelte-14d2sqa"),i(o,"class","flex-row svelte-14d2sqa"),i(r,"title","Keyboard: W"),i(r,"class","nes-btn is-error svelte-14d2sqa"),i(f,"title","Keyboard: A"),i(f,"class","nes-btn is-primary svelte-14d2sqa"),i(A,"title","Keyboard: D"),i(A,"class","nes-btn is-primary svelte-14d2sqa"),i(P,"class","flex-row svelte-14d2sqa"),i(m,"class","flex-column flex-grow flex-center svelte-14d2sqa"),i(B,"title","Keyboard: Arrow up"),i(B,"class","nes-btn is-error svelte-14d2sqa"),i(I,"title","Keyboard: Arrow left"),i(I,"class","nes-btn is-primary svelte-14d2sqa"),i(K,"title","Keyboard: Arrow right"),i(K,"class","nes-btn is-primary svelte-14d2sqa"),i(E,"class","flex-row svelte-14d2sqa"),i(k,"class","flex-column flex-grow flex-center svelte-14d2sqa"),i(g,"class","flex-row row-margin svelte-14d2sqa"),i(n,"class","container-inner"),i(t,"class","container no-padding-top svelte-14d2sqa")},m(Z,De){C(Z,t,De),u(t,n),u(n,o),u(o,s),u(o,a),u(o,l),u(o,p),u(o,d),u(n,h),u(n,g),u(g,m),u(m,r),u(m,v),u(m,P),u(P,f),u(P,x),u(P,A),u(m,U),u(m,M),u(g,te),u(g,k),u(k,B),u(k,se),u(k,E),u(E,I),u(E,ne),u(E,K),u(k,ae),u(k,V),X||(oe=[b(s,"mousedown",e[8].handleMouseDown),b(s,"mouseup",e[8].handleMouseUp),b(l,"mousedown",e[0].handleMouseDown),b(l,"mouseup",e[0].handleMouseUp),b(d,"mousedown",e[4].handleMouseDown),b(d,"mouseup",e[4].handleMouseUp),b(r,"mousedown",e[1].handleMouseDown),b(r,"mouseup",e[1].handleMouseUp),b(f,"mousedown",e[2].handleMouseDown),b(f,"mouseup",e[2].handleMouseUp),b(A,"mousedown",e[3].handleMouseDown),b(A,"mouseup",e[3].handleMouseUp),b(B,"mousedown",e[5].handleMouseDown),b(B,"mouseup",e[5].handleMouseUp),b(I,"mousedown",e[6].handleMouseDown),b(I,"mouseup",e[6].handleMouseUp),b(K,"mousedown",e[7].handleMouseDown),b(K,"mouseup",e[7].handleMouseUp)],X=!0)},p:L,i:L,o:L,d(Z){Z&&D(t),X=!1,Se(oe)}}}function Ve(e){const t=$(ce,"1"),n=$(de,"w"),o=$(fe,"a"),s=$(me,"d"),a=$(pe,"2"),l=$(ve,"ArrowUp"),p=$(ge,"ArrowLeft"),d=$(he,"ArrowRight"),h=$(ie,"c");return $(ue,"t"),[t,n,o,s,a,l,p,d,h]}class Xe extends H{constructor(t){super();j(this,t,Ve,Qe,N,{})}}function Ze(e){let t,n,o,s,a;return{c(){t=c("div"),n=c("div"),n.innerHTML='<div class="display-padding-inner svelte-1155qbo"></div>',o=_(),s=c("div"),a=c("canvas"),i(n,"class","display-padding svelte-1155qbo"),i(a,"class","display svelte-1155qbo"),i(a,"width",e[1]),i(a,"height",e[0]),i(s,"class","display-outer svelte-1155qbo"),i(t,"class","display-container svelte-1155qbo")},m(l,p){C(l,t,p),u(t,n),u(t,o),u(t,s),u(s,a),e[4](a)},p(l,[p]){p&2&&i(a,"width",l[1]),p&1&&i(a,"height",l[0])},i:L,o:L,d(l){l&&D(t),e[4](null)}}}function et(e,t,n){let{memory:o}=t,{height:s=256}=t,{width:a=224}=t,l,p,d=new ImageData(a,s);function h(){const m=new Uint8Array(o.data.slice(9216,16384));for(let r=0;r<m.length;r++){const v=m[r],P=~((r&31)*8&255)&255,f=r>>5;for(let x=0;x<8;x++){const A=(v&1<<x)!=0,M=(P-x)*(4*a)+f*4;A?(d.data[M]=255,d.data[M+1]=255,d.data[M+2]=255,d.data[M+3]=255):(d.data[M]=0,d.data[M+1]=0,d.data[M+2]=0,d.data[M+3]=255)}}p.putImageData(d,0,0),window.requestAnimationFrame(h)}re(()=>{l&&(p=l.getContext("2d"),window.requestAnimationFrame(h))});function g(m){ke[m?"unshift":"push"](()=>{l=m,n(2,l)})}return e.$$set=m=>{"memory"in m&&n(3,o=m.memory),"height"in m&&n(0,s=m.height),"width"in m&&n(1,a=m.width)},[s,a,l,o,g]}class tt extends H{constructor(t){super();j(this,t,et,Ze,N,{memory:3,height:0,width:1})}}function st(e){let t,n,o,s,a,l,p,d,h,g,m;return{c(){t=c("div"),n=c("div"),o=c("div"),s=c("div"),a=c("select"),l=c("option"),l.textContent="Space Invaders",p=c("option"),p.textContent="Lunar Rescue",d=_(),h=c("a"),h.innerHTML='<i class="nes-icon github is-medium"></i>',l.__value="space-invaders",l.value=l.__value,p.__value="lunar-rescue",p.value=p.__value,e[0]===void 0&&Le(()=>e[1].call(a)),i(s,"class","nes-select"),i(h,"class","github-link svelte-na4y25"),i(h,"href","https://github.com/Skayo/EightyEighty.js"),i(h,"target","_blank"),i(o,"class","header-row svelte-na4y25"),i(n,"class","container-inner"),i(t,"class","container")},m(r,v){C(r,t,v),u(t,n),u(n,o),u(o,s),u(s,a),u(a,l),u(a,p),le(a,e[0]),u(o,d),u(o,h),g||(m=b(a,"change",e[1]),g=!0)},p(r,[v]){v&1&&le(a,r[0])},i:L,o:L,d(r){r&&D(t),g=!1,m()}}}function nt(e,t,n){let o;ee(e,Q,a=>n(0,o=a));function s(){o=Ue(this),Q.set(o)}return[o,s]}class at extends H{constructor(t){super();j(this,t,nt,st,N,{})}}function ot(e,t,n){let o;switch(ee(e,Q,s=>n(0,o=s)),o){case"space-invaders":y(we,"/games/space-invaders/sounds/0.wav"),y(be,"/games/space-invaders/sounds/1.wav"),y(ye,"/games/space-invaders/sounds/2.wav"),y(_e,"/games/space-invaders/sounds/3.wav"),y(xe,"/games/space-invaders/sounds/4.wav"),y(qe,"/games/space-invaders/sounds/5.wav"),y(Me,"/games/space-invaders/sounds/6.wav"),y(Pe,"/games/space-invaders/sounds/7.wav"),y(Ae,"/games/space-invaders/sounds/8.wav");break;case"lunar-rescue":y(we,"/games/lunar-rescue/sounds/thrust.wav"),y(be,"/games/lunar-rescue/sounds/beamgun.wav"),y(ye,"/games/lunar-rescue/sounds/rescueshipexplosion.wav"),y(_e,"/games/lunar-rescue/sounds/alienexplosion.wav"),y(xe,"/games/lunar-rescue/sounds/steph.wav"),y(qe,"/games/lunar-rescue/sounds/stepl.wav"),y(Me,"/games/lunar-rescue/sounds/shootingstar.wav"),y(Pe,"/games/lunar-rescue/sounds/bonus3.wav"),y(Ae,"/games/lunar-rescue/sounds/bonus2.wav");break}return[]}class rt extends H{constructor(t){super();j(this,t,ot,null,N,{})}}function lt(e){let t,n,o,s,a,l,p,d,h,g,m;return n=new at({}),a=new tt({props:{memory:e[0]}}),d=new Xe({}),g=new rt({}),{c(){t=c("header"),G(n.$$.fragment),o=_(),s=c("section"),G(a.$$.fragment),l=_(),p=c("footer"),G(d.$$.fragment),h=_(),G(g.$$.fragment)},m(r,v){C(r,t,v),Y(n,t,null),C(r,o,v),C(r,s,v),Y(a,s,null),C(r,l,v),C(r,p,v),Y(d,p,null),C(r,h,v),Y(g,r,v),m=!0},p:L,i(r){m||(z(n.$$.fragment,r),z(a.$$.fragment,r),z(d.$$.fragment,r),z(g.$$.fragment,r),m=!0)},o(r){W(n.$$.fragment,r),W(a.$$.fragment,r),W(d.$$.fragment,r),W(g.$$.fragment,r),m=!1},d(r){r&&D(t),J(n),r&&D(o),r&&D(s),J(a),r&&D(l),r&&D(p),J(d),r&&D(h),J(g,r)}}}function it(e,t,n){let o;ee(e,Q,f=>n(6,o=f));const s=new Be,a=new Ie(s,{input:m,output:r});let l=O(8),p=0;Te.subscribe(f=>p=f);let d=0;Ge.subscribe(f=>d=f);let h=0;Ye.subscribe(f=>h=f);let g=0;Je.subscribe(f=>g=f);function m(f){switch(f){case 0:return p;case 1:return d;case 2:return h;case 3:return g;default:throw new Error("Unknown port: "+f)}}function r(f,x){switch(f){case 2:$e.set(x);return;case 3:T.set(x);return;case 4:Ce.set(x);return;case 5:R.set(x);return;case 6:return;case 7:return;default:throw new Error("Unknown port: "+f)}}async function v(f,x){const A=await fetch(f).then(U=>U.arrayBuffer()).then(U=>new Uint8Array(U));s.load(A,x)}function P(){if(a.halted)return;let f=0;for(;f<16667;)f+=a.next();for(a.handleIntEnabled(l),l=O(l==8?16:8);f<33334;)f+=a.next();window.requestAnimationFrame(P)}return re(async()=>{switch(o){case"space-invaders":await Promise.all([v("/games/space-invaders/roms/invaders.h",0),v("/games/space-invaders/roms/invaders.g",2048),v("/games/space-invaders/roms/invaders.f",4096),v("/games/space-invaders/roms/invaders.e",6144)]);break;case"lunar-rescue":await Promise.all([v("/games/lunar-rescue/roms/lrescue.1",0),v("/games/lunar-rescue/roms/lrescue.2",2048),v("/games/lunar-rescue/roms/lrescue.3",4096),v("/games/lunar-rescue/roms/lrescue.4",6144),v("/games/lunar-rescue/roms/lrescue.5",16384),v("/games/lunar-rescue/roms/lrescue.6",18432)]);break}window.requestAnimationFrame(P)}),[s]}class ut extends H{constructor(t){super();j(this,t,it,lt,N,{})}}new ut({target:document.getElementById("app")});
